var tabsIdioma=[{modalChildsTitle:"Ages",childLabel:"Child",ageLabel:"Years",agePlaceholder:"Select Age"}];var $menuTab1=$("#menuTab1");var $menuTab2=$("#menuTab2");
var $tab1=$("#tab1");var $tab2=$("#tab2");var $ciudadHotelSalida=$("#ciudadHotelSalida");var $ciudadHotelDestino=$("#ciudadHotelDestino");var $fechaHotelSalida=$("#fechaHotelSalida");
var $fechaHotelRegreso=$("#fechaHotelRegreso");var $depHotelCitySelected=$("#depHotelCitySelected");var $retHotelCitySelected=$("#retHotelCitySelected");
var $fechaHotelSalidaDiv=$("#fechaHotelSalidaDiv");var $fechaHotelRegresoDiv=$("#fechaHotelRegresoDiv");var $fechaHotelSalidaSelected=$("#fechaHotelSalidaSelected");
var $fechaHotelRegresoSelected=$("#fechaHotelRegresoSelected");var $cityInput3=$("#cityInput3");var $cityInput4=$("#cityInput4");var $citySelect3=$("#citySelect3");
var $citySelect4=$("#citySelect4");var $hotelChild=$("#hotel-child");var $submitFormHotel=$("#hBaf");var $submitHotel=$("#submitHotel");var cityKey1="",cityLabel1="";
var cityKey2="",cityLabel2="";var dateHotelA,dateHotelB;var selectedHotelAC1,selectedHotelAC2,selectedHotelAC1Aux,selectedHotelAC2Aux;var numChilds=0,numChildsAux;
var childAges=new Array();$citySelect3.click(function(){$(this).focusout();openCompraModal(airports_mlt,1,0,2,modalRegions_mlt,$cityInput3,$depHotelCitySelected);
});$citySelect4.click(function(){$(this).focusout();if(cityKey1!=""){openCompraModal(depAirports_mlt,2,cityKey1,1,depRegions,$cityInput4,$retHotelCitySelected);
}else{alert("Error!");}});function toogleTabs(a){if(a==1){$tab2.hide();$tab1.fadeIn();$menuTab2.removeClass("menuTab2Active");$menuTab1.addClass("menuTab1Active");
}else{$tab1.hide();$tab2.fadeIn();$menuTab1.removeClass("menuTab1Active");$menuTab2.addClass("menuTab2Active");}}var tabActive=document.location.hash;if(tabActive=="#vacations"){toogleTabs(2);
tabNum=2;}$menuTab1.click(function(){toogleTabs(1);tabNum=1;});$menuTab2.click(function(){toogleTabs(2);tabNum=2;});$ciudadHotelSalida.autocomplete({source:function(b,a){var c=new RegExp($.ui.autocomplete.escapeRegex(b.term),"i");
a($.grep(airports_mlt,function(d){d=d.label||d.value||d;return c.test(d)||c.test(normalize(d));}));},select:function(a,b){iChooChooChooseYou(1,b.item,$cityInput3,$depHotelCitySelected,$ciudadHotelSalida);
}}).data("ui-autocomplete")._renderItem=function(b,c){var a=(c.partner==1)?"partner_roundtrip":"partner_one-way";return $("<li class='autocomplete-option'></li>").data("item.autocomplete",c).append("<a class='"+a+"'>"+c.label+"</a>").appendTo(b);
};$ciudadHotelDestino.autocomplete({source:function(c,a){if(cityKey1!=""){var b=[];var d=findIndexByKeyValue(airports_mlt,"key",cityKey1);for(y=0;y<airports_mlt[d]["depart"].length;
y++){for(z=0;z<airports.length;z++){if(airports_mlt[d]["depart"][y]==airports[z].key){var f={key:airports[z].key,label:airports[z].label,country:airports[z].country,partner:airports[z].partner};
b.push(f);}}}var e=new RegExp($.ui.autocomplete.escapeRegex(c.term),"i");a($.grep(b,function(g){g=g.label||g.value||g;return e.test(g)||e.test(normalize(g));
}));}else{console.log("Error!");}},select:function(a,b){iChooChooChooseYou(2,b.item,$cityInput4,$retHotelCitySelected,$ciudadHotelDestino);},delay:0,minLength:0}).focus(function(){window.setTimeout(function(){if($ciudadHotelDestino.val().length==0){$ciudadHotelDestino.autocomplete("search","");
}});}).click(function(){window.setTimeout(function(){if($ciudadHotelDestino.val().length==0){$ciudadHotelDestino.autocomplete("search","");}});}).data("ui-autocomplete")._renderItem=function(b,c){var a=(c.partner==1)?"partner_roundtrip":"partner_one-way";
return $("<li class='autocomplete-option'></li>").data("item.autocomplete",c).append("<a class='"+a+"'>"+c.label+"</a>").appendTo(b);};var allAgesTexted=0;
$("#select-child li").click(function(){var b="",a=$(this).attr("data-val");numChilds=a;allAgesTexted=0;$("#active_childs").removeClass("button_active_coupon");
if(numChilds>0){for(i=1;i<=numChilds;i++){$("#child-hotel-title span").html(tabsIdioma[0].modalChildsTitle);b+='<span><label for="ninoHotel0'+i+'">'+tabsIdioma[0].childLabel+" "+i+"</label>";
b+='<select class="hotelDataChild" id="ninoHotel0'+i+'" name="ninoHotel0'+i+'">';b+='<option class="firstInputChild" value="0">'+tabsIdioma[0].agePlaceholder+"</option>";
for(j=2;j<=18;j++){b+='<option value="'+j+'">'+j+" "+tabsIdioma[0].ageLabel+"</option>";}b+="</select></span>";}$("#child-hotel_bg").fadeIn();$("#child-hotel_input").html(b);
$("#child-hotel_input select").change(function(){console.log("--- :"+numChilds+": --------------------------------------");allAgesTexted=1;for(i=1,j=0;
i<=numChilds;i++,j++){childAges[j]=$("#ninoHotel0"+i).val();if(childAges[j]==0){allAgesTexted=0;}console.log(childAges[j]);}console.log("Activo?:"+allAgesTexted);
if(allAgesTexted==1){$("#active_childs").addClass("button_active_coupon");}else{$("#active_childs").removeClass("button_active_coupon");}});$("#active_childs").click(function(){if(allAgesTexted==1){$("#child-hotel_bg").fadeOut();
$("#changeHotelAges").fadeIn();}});$("#changeHotelAges").click(function(){$("#child-hotel_bg").fadeIn();});$("#icon_close_childs").click(function(){$("#child-hotel_bg").fadeOut();
numChilds=0;$hotelChild.val(numChilds);allAgesTexted=0;$("#active_childs").removeClass("button_active_coupon");$("#changeHotelAges").fadeOut();});$(document).keyup(function(c){if(c.keyCode==27){$("#child-hotel_bg").fadeOut();
}});}if(numChilds==0){$("#changeHotelAges").fadeOut();}});$submitFormHotel.submit(function(){return false;});$submitHotel.click(function(){var l="";var e=1;
var f=$("#origin").val();var h=$("#destination").val();var m=$("#departureDate").val();var d=$("#returnDate").val();var n=$("#departureTime").val();var c=$("#returnTime").val();
var g=$("input[name=tipHotelpaquete]:checked").val();var b=$("#hotelAdults").val();var k=$("#hotel-child").val();var a="";a+="http://www.aeromexicovacations.com/sitenav?tag=BOOK_COBRAND";
a+="&package="+g;a+="&airDisplayIndicator=P";if($("#origin").val()==""){l+="- Departure city is required \n";e=0;}else{a+="&origin="+f;}if($("#destination").val()==""){l+="- Destination city is required \n";
e=0;}else{a+="&destination="+h;}if($("#departureDate").val()==""){l+="- Departure date is required \n";e=0;}else{a+="&departureDate="+m;}a+="&departureTime=00:01";
if($("#departureDate").val()==""){l+="- Return date is required \n";e=0;}else{a+="&returnDate="+d;}a+="&returnTime=23:59";a+="&cabinClass=C";a+="&adultCount="+b;
a+="&childCount="+k;for(i=0;i<childAges.length;i++){a+="&child["+i+"].age="+childAges[i];}a+="&coBrand=TEST";a+="&fewestStops=false";a+="&rfr=MEXQUICKBOOK";
if(e==0){alert(l);}else{window.location.href=a;}return false;});$fechaHotelSalida.click(function(){$(this).datepicker();});$fechaHotelSalida.datepicker({numberOfMonths:2,dateFormat:"D, M dd, yy",minDate:0,maxDate:"+11m",showButtonPanel:true,onSelect:function(a){dateHotelA=$(this).datepicker("getDate");
dateHotelAm=new Date(dateHotelA.getTime());dateHotelAm.setDate(dateHotelAm.getDate());$("#departureDate").val((dateHotelAm.getMonth()+1)+"/"+dateHotelAm.getDate()+"/"+dateHotelAm.getFullYear());
$fechaHotelRegreso.datepicker("option","minDate",dateHotelAm);setTimeout(function(){$fechaHotelRegreso.focus();},150);$fechaHotelSalidaDiv.hide();$fechaHotelSalidaSelected.html($(this).val()+'<a href="#" id="calendarIcon3" class="calendar-icon"></a>');
$fechaHotelSalidaSelected.fadeIn();$("#calendarIcon3").click(function(){$fechaHotelSalidaSelected.hide();$fechaHotelSalidaDiv.fadeIn();$fechaHotelSalida.val("");
$fechaHotelSalida.focus();});if($fechaHotelRegreso.val()>=$fechaHotelSalida.val()){$fechaHotelRegresoSelected.hide();$fechaHotelRegresoDiv.fadeIn();$fechaHotelRegreso.val("");
}}});$fechaHotelRegreso.datepicker({numberOfMonths:2,dateFormat:"D, M dd, yy",minDate:0,maxDate:"+11m",showButtonPanel:true,onSelect:function(a){dateHotelB=$(this).datepicker("getDate");
dateHotelBm=new Date(dateHotelB.getTime());dateHotelBm.setDate(dateHotelBm.getDate());$("#returnDate").val((dateHotelBm.getMonth()+1)+"/"+dateHotelBm.getDate()+"/"+dateHotelBm.getFullYear());
$fechaHotelRegresoDiv.hide();$fechaHotelRegresoSelected.html($(this).val()+'<a href="#" id="calendarIcon4" class="calendar-icon"></a>');$fechaHotelRegresoSelected.fadeIn();
$("#calendarIcon4").click(function(){$fechaHotelRegresoSelected.hide();$fechaHotelRegresoDiv.fadeIn();$fechaHotelRegreso.val("");$fechaHotelRegreso.focus();
});}});$("#switchToFrm2").click(function(){tabNum=2;$(".flight-form").eq(0).animate({opacity:0.5},300,function(){$(this).css({opacity:1,display:"none"});
$(".flight-form").eq(1).css({display:"block",opacity:0.5});$(".flight-form").eq(1).animate({opacity:1},300,function(){});});});$("#switchToFrm1").click(function(){tabNum=1;
$(".flight-form").eq(1).animate({opacity:0.5},300,function(){$(this).css({opacity:1,display:"none"});$(".flight-form").eq(0).css({display:"block",opacity:0.5});
$(".flight-form").eq(0).animate({opacity:1},300,function(){});});});